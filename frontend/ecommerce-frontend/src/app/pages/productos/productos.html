<div id="home-screen" class="app-screen">
<!-- Header -->
<header class="top-header">
  <h1 class="logo-text">
    <svg class="logo-icon" width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path
        d="M20 7H4C2.89543 7 2 7.89543 2 9V19C2 20.1046 2.89543 21 4 21H20C21.1046 21 22 20.1046 22 19V9C22 7.89543 21.1046 7 20 7Z"
        stroke="url(#gradient)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
      <path d="M16 11C16 13.2091 14.2091 15 12 15C9.79086 15 8 13.2091 8 11" stroke="url(#gradient)" stroke-width="1.5"
        stroke-linecap="round" stroke-linejoin="round" />
      <path d="M8 7V5C8 3.89543 8.89543 3 10 3H14C15.1046 3 16 3.89543 16 5V7" stroke="url(#gradient)"
        stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
      <defs>
        <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" stop-color="#3B82F6" />
          <stop offset="100%" stop-color="#8B5CF6" />
        </linearGradient>
      </defs>
    </svg>
    E-COMMERCE
  </h1>
</header>

  <!-- Buscador -->
  <section class="search-container">
    <div class="search-wrapper">
      <input
        type="search"
        class="search-bar"
        [placeholder]="searchPlaceholder"
        [value]="searchTerm()"
        (input)="onSearch($event.target.value)"
        aria-label="Buscar productos"
      />
      <div class="search-icon" aria-hidden="true">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M21 21L16.514 16.506L21 21ZM19 10.5C19 15.194 15.194 19 10.5 19C5.806 19 2 15.194 2 10.5C2 5.806 5.806 2 10.5 2C15.194 2 19 5.806 19 10.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
    </div>
  </section>

  <!-- Contenido principal desplazable -->
  <main class="main-content">
    <!-- Secci칩n de Categor칤as -->
    <section class="categories-section">
      <h2 class="section-title">Categor칤as</h2>
      
      <div class="category-grid" role="list">
        <!-- Bot칩n "Todas" -->
        <button
          class="category-item"
          role="listitem"
          type="button"
          aria-label="Todas las categor칤as"
          (click)="selectCategory(null)"
          [class.active]="selectedCategory() === null"
        >
          <div class="category-circle">
            <div class="category-icon">游닍</div>
          </div>
          <span>Todas</span>
        </button>

        <!-- Categor칤as desde API -->
        @for (c of categories(); track c) {
          <button
            class="category-item"
            role="listitem"
            type="button"
            [attr.aria-label]="'Categor칤a ' + c"
            (click)="selectCategory(c)"
            [class.active]="selectedCategory() === c"
          >
            <div class="category-circle">
              <div class="category-icon">{{ getCategoryIcon(c) }}</div>
            </div>
            <span>{{ c }}</span>
          </button>
        }
      </div>
    </section>

    <!-- Secci칩n de Productos -->
    <section class="products-section">
      <h2 class="section-title">칔ltimas Novedades</h2>

      <!-- Estados de carga -->
      @if (cargando()) {
        <div class="state" role="status" aria-live="polite">
          <div class="loading-spinner"></div>
          <span>Cargando productos...</span>
        </div>
      } @else if (errorMsg()) {
        <div class="state error" role="alert">
          <div class="error-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 9V11M12 15H12.01M5.07183 19H18.9282C20.4678 19 21.4301 17.3333 20.6603 16L13.7321 4C12.9623 2.66667 11.0377 2.66667 10.2679 4L3.33975 16C2.56995 17.3333 3.53223 19 5.07183 19Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          {{ errorMsg() }}
        </div>
      } @else {
        <!-- Grid de productos -->
        <div class="product-grid">
          @if (filteredProducts().length > 0) {
            @for (p of filteredProducts(); track p.id) {
              <app-product-card
                [imageSrc]="getImagen(p)"
                [imageAlt]="p.titulo || 'Producto sin t칤tulo'"
                [title]="p.titulo || 'Sin t칤tulo'"
                [description]="p.descripcion || ''"
                [price]="p.precio || '0'"
                currency="USD"
                [category]="p.categoria || ''"
                (cardClick)="openProduct(p)"
              />
            }
          } @else {
            <div class="state">
              <div class="empty-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M14 2V8H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M16 13H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M16 17H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M10 9H9H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
              No se encontraron productos para tu b칰squeda.
            </div>
          }
        </div>
      }
    </section>

    <!-- Espaciador para scroll -->
    <div class="spacer"></div>
  </main>

  <!-- Barra de navegaci칩n inferior -->
  <nav class="nav-bar" role="navigation" aria-label="Navegaci칩n principal">
    <button 
      class="nav-item" 
      type="button"
      [class.active]="activeTab() === 'home'"
      aria-label="Ir a inicio"
    >
      <div class="nav-icon" aria-hidden="true">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M9 22V12H15V22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <span>Inicio</span>
    </button>

    <button 
      class="nav-item" 
      type="button"
      [class.active]="activeTab() === 'sell'"
      (click)="goToSell()"
      aria-label="Vender productos"
    >
      <div class="nav-icon" aria-hidden="true">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M20 12V8H4V12M20 12L18 14H6L4 12M20 12V18C20 18.5304 19.7893 19.0391 19.4142 19.4142C19.0391 19.7893 18.5304 20 18 20H6C5.46957 20 4.96086 19.7893 4.58579 19.4142C4.21071 19.0391 4 18.5304 4 18V12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M15 6V4C15 3.46957 14.7893 2.96086 14.4142 2.58579C14.0391 2.21071 13.5304 2 13 2H11C10.4696 2 9.96086 2.21071 9.58579 2.58579C9.21071 2.96086 9 3.46957 9 4V6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <span>Mis productos</span>
    </button>

    <button 
      class="nav-item" 
      type="button"
      [class.active]="activeTab() === 'fav'"
      (click)="goToFav()"
      aria-label="Ver favoritos"
    >
      <div class="nav-icon" aria-hidden="true">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M20.84 4.61C20.3292 4.099 19.7228 3.69364 19.0554 3.41708C18.3879 3.14052 17.6725 2.99817 16.95 2.99817C16.2275 2.99817 15.5121 3.14052 14.8446 3.41708C14.1772 3.69364 13.5708 4.099 13.06 4.61L12 5.67L10.94 4.61C9.9083 3.5783 8.50903 2.9987 7.05 2.9987C5.59096 2.9987 4.19169 3.5783 3.16 4.61C2.1283 5.64169 1.54871 7.04097 1.54871 8.5C1.54871 9.95903 2.1283 11.3583 3.16 12.39L12 21.23L20.84 12.39C21.351 11.8792 21.7563 11.2728 22.0329 10.6053C22.3095 9.93789 22.4518 9.22248 22.4518 8.5C22.4518 7.77752 22.3095 7.06211 22.0329 6.39467C21.7563 5.72723 21.351 5.12081 20.84 4.61V4.61Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <span>Favoritos</span>
    </button>

    <button 
      class="nav-item" 
      type="button"
      [class.active]="activeTab() === 'cart'"
      (click)="goToCarrito()"
      aria-label="Ver carrito de compras"
    >
      <div class="nav-icon" aria-hidden="true">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org2000/svg">
          <path d="M3 3H5L5.4 5M7 13H17L21 5H5.4M7 13L5.4 5M7 13L4.707 15.293C4.077 15.923 4.523 17 5.414 17H17M17 17C16.4696 17 15.9609 17.2107 15.5858 17.5858C15.2107 17.9609 15 18.4696 15 19C15 19.5304 15.2107 20.0391 15.5858 20.4142C15.9609 20.7893 16.4696 21 17 21C17.5304 21 18.0391 20.7893 18.4142 20.4142C18.7893 20.0391 19 19.5304 19 19C19 18.4696 18.7893 17.9609 18.4142 17.5858C18.0391 17.2107 17.5304 17 17 17ZM9 19C9 19.5304 8.78929 20.0391 8.41421 20.4142C8.03914 20.7893 7.53043 21 7 21C6.46957 21 5.96086 20.7893 5.58579 20.4142C5.21071 20.0391 5 19.5304 5 19C5 18.4696 5.21071 17.9609 5.58579 17.5858C5.96086 17.2107 6.46957 17 7 17C7.53043 17 8.03914 17.2107 8.41421 17.5858C8.78929 17.9609 9 18.4696 9 19Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <span>Carrito</span>
    </button>

    <button 
      class="nav-item" 
      type="button"
      [class.active]="activeTab() === 'profile'"
      (click)="goToProfile()"
      aria-label="Ver perfil"
    >
      <div class="nav-icon" aria-hidden="true">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M12 11C14.2091 11 16 9.20914 16 7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7C8 9.20914 9.79086 11 12 11Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <span>Perfil</span>
    </button>
  </nav>
</div>